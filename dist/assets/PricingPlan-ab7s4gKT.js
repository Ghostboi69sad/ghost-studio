import{r as h,u as g,a as P,j as i}from"./index-DCysjo5h.js";import{N as E}from"./Navbar-Dhe82GLW.js";import{F as N}from"./Footer-BUBFhDjT.js";var j="https://js.stripe.com/v3",L=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,_="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",C=function(){for(var e=document.querySelectorAll('script[src^="'.concat(j,'"]')),r=0;r<e.length;r++){var n=e[r];if(L.test(n.src))return n}return null},x=function(e){var r="",n=document.createElement("script");n.src="".concat(j).concat(r);var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(n),n},I=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"4.8.0",startTime:r})},c=null,u=null,m=null,A=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},T=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},F=function(e){return c!==null?c:(c=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(_),window.Stripe){r(window.Stripe);return}try{var t=C();if(t&&e)console.warn(_);else if(!t)t=x(e);else if(t&&m!==null&&u!==null){var a;t.removeEventListener("load",m),t.removeEventListener("error",u),(a=t.parentNode)===null||a===void 0||a.removeChild(t),t=x(e)}m=T(r,n),u=A(n),t.addEventListener("load",m),t.addEventListener("error",u)}catch(f){n(f);return}}),c.catch(function(r){return c=null,Promise.reject(r)}))},R=function(e,r,n){if(e===null)return null;var t=e.apply(void 0,r);return I(t,n),t},d,S=!1,b=function(){return d||(d=F(null).catch(function(e){return d=null,Promise.reject(e)}),d)};Promise.resolve().then(function(){return b()}).catch(function(o){S||console.warn(o)});var z=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];S=!0;var t=Date.now();return b().then(function(a){return R(a,r,t)})};const M=z("your_publishable_key"),W=[{id:"monthly",name:"Monthly Plan",price:19,interval:"month",stripePriceId:"price_monthly",features:["Access to all courses","Monthly live sessions","Community access","Project feedback"]},{id:"yearly",name:"Annual Plan",price:190,interval:"year",stripePriceId:"price_yearly",features:["All Monthly Plan features","Priority support","Downloadable resources","Certificate of completion","2 months free"]}],O=()=>{const[o,e]=h.useState(!1),[r,n]=h.useState(""),t=g(),a=P(),f=async s=>{e(!0),n("");try{const l=a.currentUser;if(!l){t("/login");return}const p=await fetch("/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:s,userId:l.uid,mode:"subscription",domain:window.location.origin})}),{sessionId:y}=await p.json(),v=await M;if(!v)throw new Error("Stripe failed to load");const{error:w}=await v.redirectToCheckout({sessionId:y});if(w)throw new Error(w.message)}catch(l){n(l instanceof Error?l.message:"Failed to process subscription")}finally{e(!1)}};return i.jsx(h.Fragment,{children:i.jsxs("div",{className:"overflow-hidden bg__purple",children:[i.jsx(E,{}),i.jsx("section",{className:"position-relative",children:i.jsxs("div",{className:"container",children:[i.jsx("h1",{className:"color__white bold font__size--50 text__50-1024 text__50-sm text__50-mm text__50-xs lh__5 text-center mb-5",children:"Choose Your Plan"}),r&&i.jsx("div",{className:"alert alert-danger text-center mb-4",children:r}),i.jsx("div",{className:"row justify-content-center",children:W.map(s=>i.jsx("div",{className:"col-md-6 col-lg-5 mb-4",children:i.jsxs("div",{className:"wrapper__card-pricing bg__white p-4 rounded shadow",children:[i.jsx("h3",{className:"bold font__size--28 text__28-1024 mb-3",children:s.name}),i.jsxs("h2",{className:"bold font__size--42 text__40-1024 mb-4",children:["$",s.price,i.jsxs("span",{className:"font__size--20 text__20-1024",children:["/",s.interval]})]}),i.jsx("ul",{className:"list-unstyled mb-4",children:s.features.map((l,p)=>i.jsxs("li",{className:"mb-2",children:[i.jsx("i",{className:"fas fa-check mr-2 color__purple"}),l]},p))}),i.jsx("button",{className:"btn btn__purple color__white w-100",onClick:()=>f(s.stripePriceId),disabled:o,children:o?"Processing...":"Choose Plan"})]})},s.id))})]})}),i.jsx(N,{})]})})};export{O as default};
